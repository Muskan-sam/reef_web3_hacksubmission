"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const task_names_1 = require("hardhat/builtin-tasks/task-names");
const config_1 = require("hardhat/config");
const scripts_runner_1 = require("hardhat/internal/util/scripts-runner");
const plugins_1 = require("hardhat/plugins");
const chain_runner_1 = require("../reef-chain/chain-runner");
const utils_1 = require("../utils");
(0, config_1.task)(task_names_1.TASK_RUN, "Run script on Reef chain").setAction(async ({ script }, { run, hardhatArguments, config, network }) => {
    try {
        await run("compile");
        await (0, utils_1.ensureFilePath)(script);
        await (0, chain_runner_1.startChain)(network.name, config);
        await (0, scripts_runner_1.runScriptWithHardhat)(hardhatArguments, script);
        await (0, chain_runner_1.stopChain)();
    }
    catch (error) {
        throw new plugins_1.HardhatPluginError("Reef-chain-provider", error.message);
    }
});
//# sourceMappingURL=run.js.map